// Type definitions for Mindustry Node Control 1.0.0
// Project: https://github.com/Summet-V/mindustry-node-control
// Definitions by: Andrew Antsiferov <https://github.com/Summet-V>

/// <reference types="node" />

declare module "mindustry-node-control" {
    export const DEFAULT_PORT: number;
    export const DEFAULT_SOCKET_PORT: number;

    export class Server {
        /**
         * Server.
         * @param hostname - ip of the server.
         * @param socketPort - socket input port for sockets.
         */
        constructor(hostname: string, socketPort?: number);

        readonly hostname: string;
        readonly socketPort: number;
        readonly socket: NodeJS.Socket

        /**
         * Connects to the server. Call before calling other methods.
         * @param callback - function called after connection.
         */
        connect(callback?: () => {}): void;

        /**
         * Disconnects from server.
         * @param callback - function called after disconnection.
         */
        disconnect(callback?: () => {}): void;

        /**
         * Sends command to the remote Mindustry server.
         * @param command - command to send.
         * @param callback - function called after command send.
         */
        command(command: string, callback?: (data: string) => {}): void;

        /**
         * Pings the server.
         * @param callback - function called after ping result.
         */
        ping(callback?: (ping: number) => {}): void;
    }
}
